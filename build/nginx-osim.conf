server {
    listen 8080;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    # Prevent the app from sending unexpected requests
    add_header Content-Security-Policy "default-src 'self'; img-src 'self' data:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; upgrade-insecure-requests; frame-ancestors 'none'";

    # Prevent other apps from embedding this app; same as frame-ancestors above
    add_header X-Frame-Options "DENY";

    location = '/backends.json' {
        add_header Content-Type application/json;
        alias /dev/shm/backends.json;
    }

    location / {
        # Enable HTML5 routing: (the JS app must handle 404 on its own)
        try_files $uri$args $uri$args/ $uri $uri/ /index.html;
    }
}
